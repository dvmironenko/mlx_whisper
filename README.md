# MLX-Whisper REST API

![MLX-Whisper](https://raw.githubusercontent.com/ml-explore/mlx-whisper/main/assets/logo.png)

**MLX-Whisper REST API** ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –∞—É–¥–∏–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –º–æ–¥–µ–ª–∏ Whisper –æ—Ç OpenAI, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π Apple –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —á–∏–ø–∞—Ö Apple Silicon (M1/M2). –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ REST API –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ä–µ—á–∏ –≤ —Ç–µ–∫—Å—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤ –∏ –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ Apple Silicon**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç MLX-Whisper ‚Äî –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é Whisper, —Ä–∞–±–æ—Ç–∞—é—â—É—é –±–µ–∑ CUDA –Ω–∞ M1/M2.
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ü—Ä–æ—Å—Ç–æ–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
- **REST API**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ POST-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `curl` –∏–ª–∏ –¥—Ä—É–≥–∏–µ HTTP-–∫–ª–∏–µ–Ω—Ç—ã.
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤**: WAV, MP3, M4A, FLAC, AAC, OGG, WMA, WEBM, MP4.
- **–ì–∏–±–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —è–∑—ã–∫–∞, –∑–∞–¥–∞—á–∏ (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è/–ø–µ—Ä–µ–≤–æ–¥), —Ä–∞–∑–º–µ—Ä–∞ –º–æ–¥–µ–ª–∏, –ø–æ—Ä–æ–≥–æ–≤ –º–æ–ª—á–∞–Ω–∏—è –∏ —Ç.–¥.
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Å–ª–æ–≤**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞.
- **–¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –∞—É–¥–∏–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- macOS —Å —á–∏–ø–æ–º Apple Silicon (M1/M2) ‚Äî **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**
- Python 3.8+
- `pip` –∏ `venv`

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-username/mlx-whisper-api.git
cd mlx-whisper-api

# –°–æ–∑–¥–∞—Ç—å –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r src/requirements.txt

# –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å (–ø—Ä–∏–º–µ—Ä –¥–ª—è whisper-turbo)
mkdir -p models/whisper-turbo
# –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã config.json –∏ weights.npz –∏–∑ Hugging Face –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –≤ models/whisper-turbo/
# –ü—Ä–∏–º–µ—Ä: https://huggingface.co/mlx-community/whisper-turbo
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```bash
python src/main.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8801`. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## üì° REST API

### –≠–Ω–¥–ø–æ–∏–Ω—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏
```bash
curl -X POST "http://localhost:8801/transcribe" \
  -F "file=@/path/to/audio.wav" \
  -F "language=ru" \
  -F "task=transcribe" \
  -F "model=turbo" \
  -F "word_timestamps=true" \
  -F "condition_on_previous_text=true"
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------------------|----------|
| `file`  | *–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π* | –ê—É–¥–∏–æ—Ñ–∞–π–ª (WAV, MP3 –∏ –¥—Ä.) |
| `language` | `None` | –ö–æ–¥ —è–∑—ã–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ru`, `en`, `de`) |
| `task` | `transcribe` | –ó–∞–¥–∞—á–∞: `transcribe` –∏–ª–∏ `translate` |
| `model` | `turbo` | –†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏: `tiny`, `base`, `small`, `medium`, `turbo` |
| `word_timestamps` | `false` | –í–∫–ª—é—á–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ |
| `condition_on_previous_text` | `true` | –£—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–∫—Å—Ç –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |
| `no_speech_threshold` | `0.4` | –ü–æ—Ä–æ–≥ –º–æ–ª—á–∞–Ω–∏—è: –Ω–∏–∂–µ ‚Äî —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–∏—à–∏–Ω–æ–π |
| `hallucination_silence_threshold` | `0.8` | –ü–æ—Ä–æ–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π" |

### –û—Ç–≤–µ—Ç API
```json
{
  "text": "–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è.",
  "segments": [
    {
      "start": 0.1,
      "end": 2.4,
      "text": "–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è.",
      "words": [
        {"word": "–ü—Ä–∏–≤–µ—Ç", "start": 0.1, "end": 0.7},
        {"word": "—ç—Ç–æ", "start": 0.8, "end": 1.2},
        {"word": "—Ç–µ—Å—Ç–æ–≤–∞—è", "start": 1.3, "end": 1.9},
        {"word": "—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è.", "start": 2.0, "end": 2.4}
      ]
    }
  ],
  "language": "ru",
  "model": "turbo"
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
mlx-whisper-api/
‚îú‚îÄ‚îÄ models/                 # MLX-–º–æ–¥–µ–ª–∏ Whisper (config.json, weights.npz)
‚îÇ   ‚îú‚îÄ‚îÄ whisper-turbo/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ FastAPI-—Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css       # –°—Ç–∏–ª–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îÇ       ‚îî‚îÄ‚îÄ index.html      # HTML-—à–∞–±–ª–æ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îú‚îÄ‚îÄ tests/                  # –ü—Ä–∏–º–µ—Ä—ã –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ test.wav
‚îÇ   ‚îî‚îÄ‚îÄ 2_5258335770527167268.ogg
‚îú‚îÄ‚îÄ uploads/                # –ü–∞–ø–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ .DS_Store
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
2. –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫, –∑–∞–¥–∞—á—É –∏ –º–æ–¥–µ–ª—å.
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
4. –ù–∞–∂–º–∏—Ç–µ **"–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å"**.
5. –°–∫–∞—á–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∫ `.txt` —Ñ–∞–π–ª.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã –∏–∑ `tests/`:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ –æ–¥–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
python src/main.py

# –í –¥—Ä—É–≥–æ–º ‚Äî –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å:
curl -X POST "http://localhost:8801/transcribe" \
  -F "file=@tests/test.wav" \
  -F "language=ru"
```

## üìö –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

## üìö –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –ü—É—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ | –†–∞–∑–º–µ—Ä | –°–∫–æ—Ä–æ—Å—Ç—å | –¢–æ—á–Ω–æ—Å—Ç—å |
|--------|----------------|--------|----------|---------|
| `tiny` | `models/whisper-tiny` | ~39 MB | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è |
| `base` | `models/whisper-base` | ~74 MB | –í—ã—Å–æ–∫–∞—è | –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–∞—è |
| `small` | `models/whisper-small` | ~249 MB | –•–æ—Ä–æ—à–∞—è | –°—Ä–µ–¥–Ω—è—è |
| `medium` | `models/whisper-medium` | ~769 MB | –£–º–µ—Ä–µ–Ω–Ω–∞—è | –í—ã—Å–æ–∫–∞—è |
| `turbo` | `models/whisper-turbo` | ~1.4 GB | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| `large` | `models/whisper-large` | ~3.1 GB | –°—Ä–µ–¥–Ω—è—è | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |

> **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `turbo` –¥–ª—è –Ω–∞–∏–ª—É—á—à–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ Apple Silicon.

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é

- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**: Apple Silicon (M1/M2)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 8+ –ì–ë –û–ó–£
- **–ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**: Intel Mac, Windows, Linux

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- MLX-Whisper **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** –Ω–∞ x86_64 –∏–ª–∏ Linux ‚Äî —Ç–æ–ª—å–∫–æ Apple Silicon.
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Gunicorn** –≤–º–µ—Å—Ç–æ Uvicorn.
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `uploads/` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## üìö –°—Å—ã–ª–∫–∏

- [MLX-Whisper GitHub](https://github.com/ml-explore/mlx-whisper)
- [OpenAI Whisper Paper](https://arxiv.org/abs/2212.04356)
- [Apple MLX Framework](https://github.com/ml-explore/mlx)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)

> **–ê–≤—Ç–æ—Ä**: MLX-Whisper Team  
> **–í–µ—Ä—Å–∏—è**: 1.0.0  
> **–õ–∏—Ü–µ–Ω–∑–∏—è**: MIT